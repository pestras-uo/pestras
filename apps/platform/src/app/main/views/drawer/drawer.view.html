<aside *contra="let c">
  <div class="toolbar">
    <button class="btn-icon" (click)="toggle.emit()">
      <i puiIcon="menu"></i>
    </button>
    <div class="full grow"></div>
    <div class="full toolbar w-auto gap-2">
      <h4>PESTRAS</h4>
      <img class="p-logo" src="assets/imgs/logo.png" alt="" />
    </div>
  </div>

  <img class="short mi-auto p-logo" src="assets/imgs/logo.png" alt="" />

  <a class="short btn btn-icon btn-round mi-auto" routerLink="profile">
    <i puiIcon="account_circle"></i>
  </a>

  <app-avatar
    class="mbs-8 full cursor-pointer"
    *session="let user"
    [serial]="user.serial"
    size="huge"
    vertical
    [routerLink]="['/main/profile']"
  ></app-avatar>

  <div class="grow"></div>

  <nav>
    <div class="full align-start mbs-4">
      <h4 class="primary weight-8 pi-2">{{c['dataManagement']}}</h4>
      <p class="f10 pi-2 text3">{{c['dataMenuDesc']}}</p>
    </div>

    <a class="hover" routerLink="/main/workspace" routerLinkActive="active">
      <i puiIcon="home"></i>
      <p class="full">{{c['workspace']}}</p>
    </a>
    <a class="hover" routerLink="/main/topics" routerLinkActive="active">
      <i puiIcon="topics"></i>
      <p class="full">{{c['topics']}}</p>
    </a>

    <ng-container *ngIf="([roles.ADMIN, roles.DATA_ENG] | hasRoles)">
      <div class="full align-start mbs-4">
        <h4 class="primary weight-8 pi-2">{{c['blueprintsManagment']}}</h4>
        <p class="f10 pi-2 text3">{{c['blueprintsManagementDesc']}}</p>
      </div>

      <div class="short splitter"></div>

      <a class="hover" routerLink="/main/blueprints" routerLinkActive="active">
        <i puiIcon="blueprint"></i>
        <p class="full">{{c['blueprints']}}</p>
      </a>
    </ng-container>

    <ng-container *ngIf="(roles.ADMIN | hasRoles)">
      <div class="full align-start mbs-4">
        <h4 class="primary weight-8 pi-2">{{c['system_administration']}}</h4>
        <p class="f10 pi-2 text3">{{c['adminMenuDesc']}}</p>
      </div>

      <div class="short splitter"></div>

      <a class="hover" routerLink="/main/regions" routerLinkActive="active">
        <i puiIcon="travel_explore"></i>
        <p class="full">{{c['regions']}}</p>
      </a>
      <a class="hover" routerLink="/main/orgunits" routerLinkActive="active">
        <i puiIcon="lan"></i>
        <p class="full">{{c['orgunits']}}</p>
      </a>
      <a
        *ngIf="'root' | inOrgunit"
        class="hover"
        routerLink="/main/groups"
        routerLinkActive="active"
      >
        <i puiIcon="military_tech"></i>
        <p class="full">{{c['groups']}}</p>
      </a>
      <a class="hover" routerLink="/main/users" routerLinkActive="active">
        <i puiIcon="group"></i>
        <p class="full">{{c['users']}}</p>
      </a>
    </ng-container>
  </nav>

  <div class="grow"></div>

  <footer>
    <button
      class="short btn-outline-danger btn-small btn-icon"
      (click)="this.openModal(signout)"
    >
      <i puiIcon="logout" size="small"></i>
    </button>

    <button
      class="full btn-outline-danger btn-small btn-block"
      (click)="this.openModal(signout)"
    >
      <i puiIcon="logout" size="small"></i>
      {{c['signout']}}
    </button>
  </footer>

  <ng-template #signout>
    <div class="card w-10 shadow-6">
      <h4 class="card-header">{{c['signout']}}</h4>

      <p class="card-body">{{c['confirmSignout']}}</p>

      <div class="card-footer">
        <button class="btn-outline btn-round" (click)="closeModal()">
          {{c['cancel']}}
        </button>
        <button class="btn-danger btn-round" (click)="logout()">
          {{c['yes']}}
        </button>
      </div>

      <pui-preloader *ngIf="preloader"></pui-preloader>
    </div>
  </ng-template>
</aside>
