<ng-container *contra="let c">

  <header class="color-scheme-dark">

    <t-bg-widget></t-bg-widget>

    <div class="container">

      <div class="align-center">
        <h1 class="weight-8 mbe-4 f1">{{c['blueprints']}}</h1>
        <p class="text3 f6 w-15 mi-auto">
          خسائر اللازمة ومطالبة حدة بل. الآخر الحلفاء أن غزو, إجلاء وتنامت عدد مع. لقهر معركة لبلجيكا، بـ انه, ربع
          الأثنان المقيتة في, اقتصّت المحور حدة.
        </p>
      </div>

    </div>

  </header>

  <main>

    <div class="container">

      <div class="toolbar">
        <h2>{{c['list']}}</h2>
        <div class="grow"></div>
        <button *ngIf="roles.DATA_ENG | hasRoles" class="btn-small btn-round btn-icon mbe" (click)="openDialog(addTmp)">
          <i puiIcon="add" size="small"></i>
        </button>
      </div>

      <div class="divider mbs-4 mbe-8"></div>

      <ng-container *ngIf="bps$ | async as bps">
        <div class="grid cols-3 gap-8 pi-0" *ngIf="bps.length; else noData">
          <div class="card mbe-2" *ngFor="let bp of bps">
            <div class="card-body">
              <h3>{{bp.name}}</h3>
              <p class="bold text-3">{{bp.create_date | date: 'dd/MM/YYYY'}}</p>
            </div>
            <div class="card-footer">
              <a [routerLink]="['/main/blueprints', bp.serial]" class="btn btn-outline btn-round">{{c['continue']}}</a>
            </div>
          </div>
        </div>
      </ng-container>

      <ng-template #noData>
        <no-data-placeholder-widget [actionName]="c['addNew']"
          (action)="openDialog(addTmp)">{{c['noDataMsg']}}</no-data-placeholder-widget>
      </ng-template>

    </div>

  </main>

  <ng-template #addTmp>
    <div class="card w-15 shadow-6">

      <h3 class="card-header">{{c['addBlueprint']}}</h3>

      <div class="card-body">

        <label for="bp-name">{{c['name']}}</label>
        <div class="fc">
          <input #nameInput id="bp-name" type="text" autocomplete="off">
        </div>

      </div>

      <div class="card-footer">
        <button class="btn-round btn-outline" (click)="closeDialog()">{{c['cancel']}}</button>
        <button class="btn-primary btn-round" [disabled]="!nameInput.value"
          (click)="add(c, nameInput.value)">{{c['add']}}</button>
      </div>

      <pui-preloader *ngIf="preloader"></pui-preloader>

    </div>
  </ng-template>

</ng-container>