<ng-container *contra="let c">
  <ng-container
    *ngIf="dashboards$ | async | fn: setDefaultActive as dashboards"
  >
    <main *ngIf="dashboards.length else noData">
      <div class="card card-small bordered">
        <div class="card-header">
          <h5 class="primary">{{c['list']}}</h5>
          <div class="grow"></div>
          <button
            class="btn-round btn-icon btn-small"
            (click)="openDialog(addTmp)"
          >
            <i puiIcon="add" size="small"></i>
          </button>
        </div>
        <ul class="card-body list list-actions p-0">
          <li
            *ngFor="let ds of dashboards"
            class="list-item hover-surface2 pi-4"
            [class.active]="active === ds"
            (click)="active = ds"
          >
            <h5>{{ds.title}}</h5>
          </li>
        </ul>
      </div>

      <app-content-views *ngIf="active" [entity]="active.serial" size="small">
        <a
          [routerLink]="['/main/dashboards', active.topic, active.serial]"
          class="action btn-small btn-primary btn btn-round"
        >
          {{c['continue']}}
        </a>
      </app-content-views>
    </main>
  </ng-container>

  <ng-template #noData>
    <no-data-placeholder-widget
      [actionName]="c['addNew']"
      (action)="openDialog(addTmp)"
      >{{c['noDataMsg']}}</no-data-placeholder-widget
    >
  </ng-template>

  <ng-template #addTmp>
    <div class="card w-15 shadow-6">
      <h4 class="card-header">{{c['addNew']}}</h4>

      <div class="card-body">
        <label for="dash-title">{{c['title']}} *</label>
        <div class="fc">
          <input
            autocomplete="off"
            type="text"
            id="dash-title"
            [formControl]="title"
          />
        </div>
      </div>

      <div class="card-footer">
        <button class="btn-round btn-outline" (click)="this.closeDialog()">
          {{c['cancel']}}
        </button>
        <button
          class="btn-primary btn-round"
          [disabled]="title.invalid"
          (click)="add(c)"
        >
          {{c['add']}}
        </button>
      </div>

      <pui-preloader *ngIf="preloader"></pui-preloader>
    </div>
  </ng-template>
</ng-container>
