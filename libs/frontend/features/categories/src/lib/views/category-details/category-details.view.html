<ng-container *contra="let c">
  <header class="toolbar gap-4 mbe-8">
    <div class="grow">
      <p *ngIf="selected.ordinal" class="primary bold">{{c['ordinal']}}</p>
      <p *ngIf="!selected.ordinal" class="primary bold">{{c['_category']}}</p>
      <h3>{{selected.title}}</h3>
    </div>

    <button
      *ngIf="editable"
      class="btn-icon btn-round"
      (click)="openDialog(updateModal)"
    >
      <i class="bg-white" size="small" puiIcon="edit_fill"></i>
    </button>
  </header>

  <main>
    <div class="mbe-6">
      <h3 class="mbe-4">{{c['branches']}}</h3>
    </div>

    <pui-table
      [config]="tableConfig"
      (actionClick)="openDialog(updateModal, $event.row)"
      [list]="selected.serial | categoryBranches"
      [searchPlaceholder]="c['search']"
    >
      <button
        *ngIf="editable"
        class="action btn-icon btn-small btn-outline btn-round"
        (click)="openDialog(addModal)"
      >
        <i size="small" puiIcon="add"></i>
      </button>

      <no-data-placeholder-widget
        [small]="true"
        [showAction]="editable"
        [actionName]="c['addNew']"
        (action)="openDialog(addModal)"
        >{{c['noDataMsg']}}</no-data-placeholder-widget
      >
    </pui-table>
  </main>

  <ng-template #addModal>
    <app-add-category
      [bp]="bp"
      [parent]="selected"
      (close)="closeDialog()"
    ></app-add-category>
  </ng-template>

  <ng-template #updateModal>
    <app-update-category
      [category]="selected"
      (close)="closeDialog()"
    ></app-update-category>
  </ng-template>
</ng-container>
